import{c as z,r as c,j as e}from"./index-5ySGyT65.js";import{b as N,u as U,a as O}from"./useTranslate-BZnkghXI.js";import{h as $,r as A,c as B,f as M,s as P,t as K,u as T,d as C}from"./customCategories.store-C5gmpRZk.js";import{B as l}from"./Button-Bx2NMLCE.js";import{K as S}from"./transition-BeF5ETMQ.js";import"./clsx-B-dksMZM.js";const q=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],I=z("x",q),W=[{name:"home",iconUrl:$},{name:"restaurant",iconUrl:A},{name:"car",iconUrl:B},{name:"food",iconUrl:M},{name:"sparkles",iconUrl:P},{name:"trendingup",iconUrl:K}],R=({isOpen:x,onClose:u,title:i})=>{const[t,m]=c.useState({category:"",type:"expense",iconUrl:"",budgetType:"needs"}),a=N(),o=T(n=>n.addCategory),r=n=>{n.preventDefault(),o({category:t.category,type:t.type,iconUrl:t.iconUrl,budgetType:t.budgetType}),console.log(t),u()};return e.jsx(S,{show:x,as:c.Fragment,enter:"transition ease-out duration-300 transform",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"transition ease-in duration-200 transform",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"relative w-full max-w-md bg-secondary/50 backdrop-blur-sm rounded-2xl shadow-lg p-6 border border-muted transition-colors duration-300",children:[e.jsx("button",{className:"absolute top-3 right-3 text-muted-foreground hover:text-primary text-lg font-bold transition-colors",onClick:u,children:"✕"}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-primary",children:i??a("customCategories.titleAdd")}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-primary",children:a("customCategories.nameLabel")}),e.jsx("input",{type:"text",placeholder:a("customCategories.namePlaceholder"),value:t.category,onChange:n=>m({...t,category:n.target.value}),className:"w-full p-2 bg-background text-primary border border-muted rounded-lg focus:outline-none focus:ring-2 focus:ring-primary transition-colors"}),e.jsx("label",{className:"text-primary",children:a("customCategories.typeLabel")}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(l,{type:"button",variant:t.type==="expense"?"danger":"secondary",fullWidth:!0,onClick:()=>m({...t,type:"expense"}),children:a("customCategories.typeExpense")}),e.jsx(l,{type:"button",variant:t.type==="income"?"success":"secondary",fullWidth:!0,onClick:()=>m({...t,type:"income"}),children:a("customCategories.typeIncome")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-primary",children:a("customCategories.budgetTypeLabel")}),t.type==="income"?e.jsx("p",{className:"text-sm text-muted-foreground",children:a("customCategories.budgetTypeOnlyExpense")}):e.jsxs("div",{className:"flex gap-2",children:[e.jsx(l,{type:"button",variant:t.budgetType==="needs"?"primary":"secondary",fullWidth:!0,onClick:()=>m({...t,budgetType:"needs"}),size:"sm",children:a("customCategories.budgetTypeNeeds")}),e.jsx(l,{type:"button",variant:t.budgetType==="wants"?"primary":"secondary",fullWidth:!0,onClick:()=>m({...t,budgetType:"wants"}),size:"sm",children:a("customCategories.budgetTypeWants")}),e.jsx(l,{type:"button",variant:t.budgetType==="savings"?"primary":"secondary",fullWidth:!0,onClick:()=>m({...t,budgetType:"savings"}),size:"sm",children:a("customCategories.budgetTypeSavings")})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-primary",children:a("customCategories.iconLabel")}),e.jsx("div",{className:"grid grid-cols-7 gap-2 mt-2",children:W.map(n=>e.jsx(l,{type:"button",variant:t.iconUrl===n.iconUrl?"primary":"ghost",size:"sm",onClick:()=>m({...t,iconUrl:n.iconUrl}),className:"w-10 h-10 p-0",children:e.jsx("img",{src:n.iconUrl,alt:n.name,className:"w-6 h-6"})}))})]}),e.jsx("div",{className:"flex gap-3 pt-2",children:e.jsx(l,{type:"button",variant:"primary",fullWidth:!0,onClick:r,disabled:!t.category||!t.iconUrl,children:a("customCategories.addButton")})})]})]})})})},X=({isOpen:x,onClose:u,category:i})=>{const{editCategory:t,deleteCategory:m}=T(),a=U(d=>d.transactions.find(b=>b.id_category===i?.id)),o=N(),[r,n]=c.useState({category:"",type:"expense",iconUrl:"",budgetType:"needs"});c.useEffect(()=>{i&&n({category:i.category,type:i.type,iconUrl:i.iconUrl,budgetType:i.budgetType||""})},[i]);const f=d=>{d.preventDefault(),i&&(t(i.id,{category:r.category,type:r.type,iconUrl:r.iconUrl,budgetType:r.budgetType}),u())},y=d=>{if(d.preventDefault(),!!i){if(a!=null){alert(o("customCategories.deleteBlocked"));return}m(i.id),u()}};return i?e.jsx(S,{show:x,as:c.Fragment,enter:"transition ease-out duration-300 transform",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"transition ease-in duration-200 transform",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"relative w-full max-w-md bg-secondary/50 backdrop-blur-sm rounded-2xl shadow-lg p-6 border border-muted transition-colors duration-300",children:[e.jsx("button",{className:"absolute top-3 right-3 text-muted-foreground hover:text-primary text-lg font-bold transition-colors",onClick:u,children:"✕"}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-primary",children:o("customCategories.titleEdit")}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-primary",children:o("customCategories.nameLabel")}),e.jsx("input",{type:"text",placeholder:o("customCategories.namePlaceholder"),value:r.category,onChange:d=>n({...r,category:d.target.value}),className:"w-full p-2 bg-background text-primary border border-muted rounded-lg focus:outline-none focus:ring-2 focus:ring-primary transition-colors"}),e.jsx("label",{className:"text-primary",children:o("customCategories.typeLabel")}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(l,{type:"button",variant:r.type==="expense"?"danger":"secondary",fullWidth:!0,onClick:()=>n({...r,type:"expense"}),children:o("customCategories.typeExpense")}),e.jsx(l,{type:"button",variant:r.type==="income"?"success":"secondary",fullWidth:!0,onClick:()=>n({...r,type:"income"}),children:o("customCategories.typeIncome")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-primary",children:o("customCategories.budgetTypeLabel")}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(l,{type:"button",variant:r.budgetType==="needs"?"primary":"secondary",fullWidth:!0,onClick:()=>n({...r,budgetType:"needs"}),children:o("customCategories.budgetTypeNeeds")}),e.jsx(l,{type:"button",variant:r.budgetType==="wants"?"primary":"secondary",fullWidth:!0,onClick:()=>n({...r,budgetType:"wants"}),children:o("customCategories.budgetTypeWants")}),e.jsx(l,{type:"button",variant:r.budgetType==="savings"?"primary":"secondary",fullWidth:!0,onClick:()=>n({...r,budgetType:"savings"}),children:o("customCategories.budgetTypeSavings")})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-primary",children:o("customCategories.iconLabel")}),e.jsx("div",{className:"grid grid-cols-7 gap-2 mt-2",children:W.map(d=>e.jsx(l,{type:"button",variant:r.iconUrl===d.iconUrl?"primary":"ghost",size:"sm",onClick:()=>n({...r,iconUrl:d.iconUrl}),className:"w-10 h-10 p-0",children:e.jsx("img",{src:d.iconUrl,alt:d.name,className:"w-6 h-6"})}))})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx(l,{type:"button",variant:"primary",fullWidth:!0,onClick:y,className:"bg-red-600 hover:bg-red-700",children:o("customCategories.deleteButton")}),e.jsx(l,{type:"button",variant:"primary",fullWidth:!0,onClick:f,disabled:!r.category||!r.iconUrl,children:o("customCategories.saveButton")})]})]})]})})}):null},Z=({onClose:x})=>{const[u,i]=c.useState(-1),[t,m]=c.useState(0),[a,o]=c.useState(null),[r,n]=c.useState(""),[f,y]=c.useState(!1),[d,b]=c.useState(!1),[k,j]=c.useState(!1),E=O(s=>s.selectedCurrency),D=U(s=>s.addTransaction),F=T(s=>s.categories),v=[...C,...F],p=N(),L=s=>{if(s.preventDefault(),!t||!a)return;const g=v.find(h=>h.id===a)?.category||"";D({type:u,amount:t,id_category:a,description:r||g,date:new Date}),x()},_=v.filter(s=>s.type===(u===1?"income":"expense"));return e.jsxs("div",{className:"min-h-full bg-background p-6 flex flex-col text-primary transition-colors duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h2",{className:"text-xl font-bold",children:p("addTransaction.title")}),e.jsx("button",{onClick:x,className:"w-10 h-10 flex items-center justify-center rounded-full bg-secondary text-primary hover:bg-muted transition-colors",children:e.jsx(I,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:L,className:"flex-1 flex flex-col",children:[e.jsxs("div",{className:"flex gap-2 p-1 bg-secondary rounded-2xl mb-8 border border-muted",children:[e.jsx("button",{type:"button",onClick:()=>i(-1),className:`flex-1 py-3 rounded-xl font-medium transition-all ${u===-1?"bg-destructive text-destructive-foreground shadow-sm":"text-muted-foreground hover:text-primary"}`,children:p("addTransaction.expense")}),e.jsx("button",{type:"button",onClick:()=>i(1),className:`flex-1 py-3 rounded-xl font-medium transition-all ${u===1?"bg-green-500 text-white shadow-sm":"text-muted-foreground hover:text-primary"}`,children:p("addTransaction.income")})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("label",{className:"block text-sm text-muted-foreground mb-2",children:p("addTransaction.amount")}),e.jsxs("div",{className:"relative border-b-2 border-muted focus-within:border-primary transition-colors",children:[e.jsx("input",{type:"number",value:t===0?"":t,onChange:s=>m(parseFloat(s.target.value)||0),placeholder:"0",className:"w-full text-5xl font-bold bg-transparent outline-none pb-4 pr-12 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",required:!0,autoFocus:!0}),e.jsx("span",{className:"absolute right-0 bottom-6 text-2xl font-medium text-muted-foreground",children:E})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("label",{className:"text-sm text-muted-foreground mb-4",children:p("addTransaction.category")}),e.jsxs("div",{className:"flex  gap-2",children:[e.jsx("label",{className:"text-sm text-blue-600 hover:text-blue-800 font-medium transition-all active:scale-95 mb-4 hover:cursor-pointer",onClick:()=>{b(!0),j(!1)},children:p("addTransaction.newCategory")}),e.jsx("label",{className:"text-sm text-blue-600 hover:text-blue-800 font-medium transition-all active:scale-95 mb-4 hover:cursor-pointer",onClick:()=>{j(!0),o(null)},children:p("addTransaction.editCategory")})]}),e.jsx(R,{isOpen:d,onClose:()=>b(!1)}),e.jsx(X,{isOpen:f,onClose:()=>{y(!1),j(!1)},category:v.find(s=>s.id===a)||null})]}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:_.map(s=>{const g=a===s.id;return e.jsxs("button",{type:"button",onClick:()=>k?(o(s.id>C.length?s.id:null),y(!0)):o(s.id),className:`relative p-4 rounded-2xl transition-all duration-200 border-2 ${g?"bg-primary/5 border-primary shadow-[0_0_0_1px_var(--color-primary)]":"bg-secondary/50 border-transparent hover:border-muted"} ${k&&s.id>C.length?"ring-2 ring-gray-400 -translate-y-1 shadow-lg":""}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center mx-auto mb-2 transition-colors ${g?"bg-primary text-primary-foreground":"bg-background"}`,children:e.jsx("img",{src:s.iconUrl,alt:s.category,className:"w-6 h-6"})}),e.jsx("p",{className:`text-[10px] font-medium text-center uppercase tracking-wider ${g?"text-primary":"text-muted-foreground"}`,children:(()=>{const h=`categories.${s.category}`,w=p(h);return w===h?s.category:w})()})]},s.id)})})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("label",{className:"block text-sm text-muted-foreground mb-2",children:p("addTransaction.description")}),e.jsx("input",{type:"text",value:r,onChange:s=>n(s.target.value),placeholder:p("addTransaction.descriptionPlaceholder"),className:"w-full px-5 py-4 bg-secondary rounded-2xl outline-none border border-transparent focus:border-primary transition-all placeholder:text-muted-foreground/50"})]}),e.jsx("div",{className:"mt-auto pt-4",children:e.jsx("button",{type:"submit",disabled:!t||!a,className:"w-full py-5 bg-primary text-primary-foreground rounded-2xl font-bold text-lg shadow-lg active:scale-[0.98] disabled:opacity-30 disabled:grayscale disabled:scale-100 transition-all",children:p("addTransaction.submit")})})]})]})};export{Z as default};
